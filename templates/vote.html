{% extends 'base.html' %}
{% block title %}
    Vote
{% endblock %}
{% block content %}
    <style>
        .mt-30 {
            margin-top: 120px;
        }
    </style>
    {% include 'navbar.html' %}
    
    <div class="container mt-30">
        {% include 'alerts.html' %}
        <div class="shadow w-100 w-md-75 mt-30 w-lg-50 mx-auto p-5">
            <h2 class=" text-center">CANDIDATES</h2>
        <form id="voteForm" method="post" action="{% url 'submit_vote' %}">
            {% csrf_token %}
            <div class="row mt-5">
                <h2 class="title mb-4 text-center"> PRESIDENTIAL CANDIDATES</h2>
                {% for candidate in candidates %}
                    {% if candidate.position == 'President' %}                   
                    <div class="col-md-3 mb-4">
                        <div class="card">
                            <img style="height: 200px; width: 200px" class="rounded-circle mx-auto d-block" src="{{ candidate.image.url }}">
                            <div class="card-body d-flex flex-column align-items-center justify-content-center">
                                <h5 class="card-title text-center">{{ candidate.full_name }}</h5>
                                <p class="card-text text-center">Position: {{ candidate.position }}</p>
                                <p class="card-text text-center">Party: {{ candidate.party }}</p>
                                <input type="checkbox" class="candidateCheckbox" name="president" value="{{ candidate.id }}">
                            </div>
                        </div>
                    </div>
                    
                    {% endif %}
                {% endfor %}
            </div>
            
            <div class="row mt-5">
                <h2 class="title mb-4 text-center"> VICE PRESIDENT CANDIDATES</h2>
                {% for candidate in candidates %}
                    {% if candidate.position == 'Vice President' %}
                    <div class="col-md-3 mb-4">
                        <div class="card">
                            <img style="height: 200px; width: 200px" class="rounded-circle mx-auto d-block" src="{{ candidate.image.url }}">
                            <div class="card-body d-flex flex-column align-items-center justify-content-center">
                                <h5 class="card-title text-center">{{ candidate.full_name }}</h5>
                                <p class="card-text text-center">Position: {{ candidate.position }}</p>
                                <p class="card-text text-center">Party: {{ candidate.party }}</p>
                                <input type="checkbox" class="candidateCheckbox" name="president" value="{{ candidate.id }}">
                            </div>
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
             
            <div class="row mt-5">
                <h2 class="title mb-4 text-center">FINANCE SECRETARY CANDIDATES</h2>
                {% for candidate in candidates %}
                    {% if candidate.position == 'Finance Secretary' %}
                    <div class="col-md-3 mb-4">
                        <div class="card">
                            <img style="height: 200px; width: 200px" class="rounded-circle mx-auto d-block" src="{{ candidate.image.url }}">
                            <div class="card-body d-flex flex-column align-items-center justify-content-center">
                                <h5 class="card-title text-center">{{ candidate.full_name }}</h5>
                                <p class="card-text text-center">Position: {{ candidate.position }}</p>
                                <p class="card-text text-center">Party: {{ candidate.party }}</p>
                                <input type="checkbox" class="candidateCheckbox" name="president" value="{{ candidate.id }}">
                            </div>
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
             
            <div class="row mt-5">
                <h2 class="title mb-4 text-center">ACADEMIC CANDIDATES</h2>
                {% for candidate in candidates %}
                    {% if candidate.position == 'Academic Secretary' %}
                    <div class="col-md-3 mb-4">
                        <div class="card">
                            <img style="height: 200px; width: 200px" class="rounded-circle mx-auto d-block" src="{{ candidate.image.url }}">
                            <div class="card-body d-flex flex-column align-items-center justify-content-center">
                                <h5 class="card-title text-center">{{ candidate.full_name }}</h5>
                                <p class="card-text text-center">Position: {{ candidate.position }}</p>
                                <p class="card-text text-center">Party: {{ candidate.party }}</p>
                                <input type="checkbox" class="candidateCheckbox" name="president" value="{{ candidate.id }}">
                            </div>
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
             
            <div class="row mt-5">
                <h2 class="title mb-4 text-center"> DELEGATE CANDIDATES</h2>
                {% for candidate in candidates %}
                    {% if candidate.position == 'Delegate' %}
                    <div class="col-md-3 mb-4">
                        <div class="card">
                            <img style="height: 200px; width: 200px" class="rounded-circle mx-auto d-block" src="{{ candidate.image.url }}">
                            <div class="card-body d-flex flex-column align-items-center justify-content-center">
                                <h5 class="card-title text-center">{{ candidate.full_name }}</h5>
                                <p class="card-text text-center">Position: {{ candidate.position }}</p>
                                <p class="card-text text-center">Party: {{ candidate.party }}</p>
                                <input type="checkbox" class="candidateCheckbox" name="president" value="{{ candidate.id }}">
                            </div>
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
            
            <!-- Repeat the same structure for other positions -->
            <div class='text-center mb-4'>
            <button type="submit" class="btn btn-primary mt-4">Submit Vote</button>
            </div>
        </form>
    </div>
</div>
    {% include 'footer.html' %}

    <script>
        // JavaScript to allow checking only one checkbox in each group
        const checkboxes = document.querySelectorAll('.candidateCheckbox');

        checkboxes.forEach((checkbox) => {
            checkbox.addEventListener('change', function() {
                checkboxes.forEach((otherCheckbox) => {
                    if (otherCheckbox !== checkbox && otherCheckbox.name === checkbox.name) {
                        otherCheckbox.checked = false;
                    }
                });
            });
        });
    </script>
{% endblock %}
